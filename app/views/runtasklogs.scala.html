@main("Neptun Dashboard"){
<!----Calender -------->
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/clndr.css")" type="text/css" />
<script src="@routes.Assets.at("javascripts/underscore-min.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/moment-2.2.1.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/clndr.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/site.js")" type="text/javascript"></script>
<!----End Calender -------->
<div class="graphs">
            <h3 style="text-align:center;"> Spark 运行日志查看  </h3>
            <div id = "runtask">
            </div>
    </div>

@copyright()
</div>
<script charset="utf-8">

    $(document).ready(function(){
        $.ajax({
            type:"GET",
            url:"/workerlist",
            dataType:"json",
            success:function(data){
              var head= "<table border='10' width='1500'><tr><th>Application ID</th><th>Name</th><th>User</th><th>Submitted Time</th><th>State</th><th>Logs</th></tr>"
                var myobj=eval(data);
                var activeapps =myobj.activeapps
                for (var p in activeapps) {
                    var id = activeapps[p].id
                    var name = activeapps[p].name
                    var user = activeapps[p].user
                    var memoryperslave = activeapps[p].memoryperslave
                    var submitdate = activeapps[p].submitdate
                    var state = activeapps[p].state
                    var duration = activeapps[p].duration
                    var appui = activeapps[p].appui
                    console.log(appui);
                  head += "<tr class= \"success\"><td><a a href='http://h136159.mars.grid.sina.com.cn:8080/app/?appId="+id+"' target='_blank'>"+id+"</td><td>"+name+"</td><td>"+user+"</td><td>"+submitdate+"</td><td>"+state+"</td><td><a href='/he?id="+id+"'>查看</a></td></tr>"
                   };


                head += " </table>";
                $('#runtask').html(head);
            }
        });
   });
  </script>
}


